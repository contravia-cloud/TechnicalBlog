---
title: "Creating_autonomous_vehicle_systems"
date: 2022-04-13

---


> creating autonomous vehicle systems 를 정리함

# 01 자율 주행 개요  
- 1960년대 페어차일드 세미컨덕터와 인텔이 마이크로프로세서를 생산하면서 정보 기술의 토대가 마련됨, 그 부산물로 실리콘 밸리가 탄생함
- 1980년대 마이크로소프트와 애플이 GUI 를 도입하면서 집집마다 PC가 보급됨
- 2000년대 누구나 컴퓨팅 파워를 누릴 수 있게되었고 구글 등의 인터넷 회사 등장으로 정보가 쉽게 연결됨
- 2010년대 페이스북과 링크드인 등 SNS회사 등장으로 인터넷 세상이 커짐
- 2015년즈음 우버나 에어비앤비 같은 인터넷 기반 서비스 회사 등장으로 인터넷 상거래 사회가 형성됨  

## 1.1 자율 주행 기술의 개요  
- 3가지 서브 시스템
  - 알고리즘 : 센싱, 인지(로컬라이제이션, 개체인지, 개체추적), 의사결정(경로계획, 동작예측, 장애물 회피)을 거치는 알고리즘
  - 클라이언트 시스템 : OS 와 하드웨어 플랫폼으로 구성된 클아이언트 시스템
  - 글라우드 플랫폼 : HD 지도와 딥 러닝 모델 트레이닝, 시뮬레이션, 데이터 스토리지 등을 제공하는 클라우드 플랫  

## 1.2 자율 주행 알고리즘

### 1.2.1 센싱
- GPS와 IMU : GPS는 대략 10Hz,상당히 정확 반면 IMU는 200Hz 이상의 빠른 주기, 그러나 시간의 흐름에 따른 누적오차 발생, 그래서 두개를 조합해야함
- 라이다 : 매핑, 로컬라이제이션, 장애물 회피 등에 사용된다. 벨로다인 64빔 레이저는 10Hz 주기로 회전, 측정값을 초당 130만번 읽는다.
- 카메라 : 차로 감지, 신호등 감지, 보행자 감지 등 개체인지 및 추적작업에 활용, 60Hz 정도 작동
- 레이터와 소나 : 장애물 회피를 위한 최후 수단, 

### 1.2.2 인지  
- 로컬라이제이션, 개체 감지, 개체 추적이라는 세 가지 작업으로 구성됨
- IMU는 5ms마다 차량의 최신 위치를 알려주는데 발생하는 누적 오차를 100ms주기로 업데이트 되는 GPS 정보로 보정한다.
- 비전으로도 로컬라이제이션을 구현할 수 있다. 스테레오 이미지 쌍에 대한 삼각측량을 통해 시차맵을 구하여 깊이 정보를 추출하고 이전 시차 맵과 비교하여 차량 위치 확인
- 라이다를 이용한 로컬라이제이션은 파티클 필터 기법을 주로 사용한다. 파티클 필터를 적용해 라이다 측정 값과 맵의 상호 연관성을 파악하는 방식으로 로컬라이제시션  

### 1.2.3 개체 인지 및 추적
- 개체 인지는 CNN을 많이 사용한다. 파이프라인은 다음과 같다. 컨볼루션 계층, 활성 계층(타깃 뉴런의 활성), 풀링 계층(매개변수 줄여 신경망 연산 축소, 공간 축소), 완전 연결 계층
- 개체 추적은 원하는 개체를 선택해서 이동궤적을 추정하는 기법  

### 1.2.4 동작
- 동작 예측 : 다른 차량의 동작을 예측하기 위한 방법으로 확률 모델을 만들어 확률 분포를 구하는 기법이 있다.
- 경로 계획 : 모든 경우에 대해 결정적인 알고리즘을 적용할 때 발생하는 계산 복잡도를 줄여서 실시간으로 경로를 계획하기 위해 확률 기반 기법을 주로 사용한다.  
- 장애물 회피 : 두단계 이상으로 구성한다. 
  - 능동형 메커니즘으로 트래픽 예측을 기반으로 충돌까지 남은 시간이나 최소거리에 대한 추정을 하여 필요 시점에 장애물 회피 메커니즘이 동작  
  - 레이더 데이터 기반의 수동형 메커니즘 : 레이터에 감지되면 주행 제어 시스템에 개입하여 장애물을 피하도록 한다.  

## 1.3 자율 주행 클라이언트 시스템  
- 센서에서 생성된 방대한 양의 데이터를 충분히 처리할 수 있도록 프로세싱 파이프라인이 빨라야한다. 또한 오류 복구와 리소스 제약사항도 만족해야.  

### 1.3.1 ROS
- 신뢰성 : 마스터가 죽을 시 또는 노드 죽을 시 복구 방안 등
- 성능 : 
- 보안 :   

### 1.3.2 하드웨어 플랫폼  
- 인텔 Xeon E5, Nvidia K80 GPU 2개
- 최소 사양 구축 
  - 로컬라이제이션 파이프라인 초당 25개의 이미지 처리
  - 딥 러닝 파이프라인 초당 2~3개의 물체 인지
  - 계획 및 제어 파이프라인은 6ms 이내 경로 계획
  - 시속 40km 주행

## 1.4 자율 주행 크라우드 플랫폼
- 분산 컴퓨팅은 스파크
- 이종 컴퓨팅은 OpenCL
- 인메모리 스토리지는 알럭시오(Alluxio)  

### 1.4.1 시뮬레이션  
- 분산 시뮬레이션 플랫폼, 분산 컴퓨팅 노드들은 스파크로 관리하고, 각 노드마다 ROS 리플레이 인스턴스를 구동함  

### 1.4.2 HD 맵 생성  
- 원본 데이터 처리, 포인트 클라우드 생성, 포인트 클라우드 정렬, 2D 반사 맵 생성, HD 맵 레이블링, 맵 생성
- 단계단계를 스파크(인메모리) 잡으로 연결하였음  

### 1.4.3 딥 러닝 모델 학습  
- 스파크와 패들(paddle)을 기반으로 확장성이 뛰어난 분산 딥 러닝 시스템 구축함  

# 02 자율 주행을 위한 로컬라이제이션  

## 2.1 GNSS를 이용한 로컬라이제이션  
### 2.1.1 GNSS 개요  


dddd




