---
title: "Math for CG"
date: 2021-10-30
categories: 
use_math: true
tag: [math, computer graphics]
---

# 1. 서론
- 컴퓨터 그래픽스 제작 단계  
    - 모델링 -> 리깅(rigging) -> 애니메이션 -> 랜더링 -> 후처리
    - 모델링 : 물체를 컴퓨터가 처리할 수 있는 방식으로 표현(폴리곤 메시)하는 것
        - 폴리곤 메시 : 폴리곤으로 구성된 물체
    - 리깅 : 골격(skelton)을 구성한 후, 각각의 뼈(bone)의 움직임이 폴리곤 메시에 어떻게 반영될 것인가 정의한다.
    - 애니메이션 : 골격을 움직여 애니메이션을 정의
    - 랜더링 : 애니메이션 스크린 샷을 2차원 프레임으로 만드는 작업 (텍스처링, 라이팅)
    - 후처리 : 모션 블러, 초점 심도 처리
- 그래픽스 API
    - 게임프로그램 - 게임 엔진 - 그래픽스 API - GPU
    - 게임 엔진은 그래픽스 API를 기반으로 개발되며 그래픽스 API는 Direct3D와 OpenGL이 있다.  

# 2. 수학의 기초
## 2.1. 행렬과 벡터
- OpenGL은 열벡터를 사용하고 Direct3D는 행벡터를 사용한다.
- 정규화(normalization)  
벡터 $v$를 그 길이 $\vert \vert v \vert \vert$로 나누는 과정을 정규화라고 한다.
- 단위 벡터  
정규화를 통해 길이가 1인 벡터, $v/\vert \vert v \vert \vert$

## 2.2. 좌표계와 기저
 - 선형독립과 기저  
 ![2545C24E569D04232C](https://t1.daumcdn.net/cfile/tistory/24743D4C56A795C00D)
 - 기저(basis, 基底)란 어떤 벡터공간 V의 벡터들이 선형독립이면서 벡터공간 V 전체를 생성할 수 있다면 이 벡터들의 집합을 말합니다.  다른 말로 표현하자면, 기저는 "R^m의 임의의 원소를 표현하기 위해 필요한 최소한의 벡터로 이루어진 집합"입니다.  
출처: https://rfriend.tistory.com/164 [R, Python 분석과 프로그래밍의 친구 (by R Friend)]

- 표준 기저 : 주축에 나란한 기저
- 직교정규(orthonormal) : 서로 직교하는 단위 벡터

## 2.3. 내적
## 2.4. 벡터곱(cross product)
## 2.5. 직선 및 선형보간
- 매개변수 방정식(parametric equation)  
$p(t)=p_o+t(p_1-p_0)$  
$p(t)=(1-t)p_o+tp_1$
  
- $(1-t)$와 $t$를 각각 $p_0$와 $p_1$에 대한 가중치(weight)
- $t$의 범위가 [0,1]일 때 $p(t)$는 $p_0$와 $p_1$의 선형보간이라고 한다.  

# 3. 모델링
## 3.1. 폴리곤 메시
- 물체를 표현하는 다양한 기법 중 폴리곤 메시가 많이 사용된다.
- GPU가 폴리곤 메시 처리에 최적화되어 있기 때문이다.
* 폴리곤 메시 표현  
    - 정점 배열과 인덱스 배열  
    인덱스 배열을 통해 효율적인 메모리 사용

## 3.2. 표면 노멀
- 삼각형 노멀 : ```v1 x v2 / ||v1 x v2||```
- 정점 노멀 : 일반적으로 삼각형 노멀들의 평균을 취함  

# 4. 좌표계와 변환
## 4.1. 2차원 변환의 행렬 표현
- 선형 변환(linear transform)  
: 확대축소 변환, 회전 변환 (행렬곱으로 나타낼 수 있음)  
: 이를 위해선 유클리드 기하학의 데카르트 좌표계가 필요하다.  
: 데카르트 좌표계에서의 선형변환은 새로운 기저(basis)로의 표현이다.

## 4.2. 아핀 변환
- 아핀 변환(affin transform)   
: 확대축소, 회전 및 이동까지 행렬곱으로 나타내기 위해선 차수가 하나 큰 동차 좌표가 필요하다.  
: 차수를 늘리면 이동까지 표현할 수 있는데 이런 변환을 아핀 변환이라고 한다. 즉 선형변환과 이동을 포함하는 것  
- 동차 좌표(homogeneous coordinates)  
: 차원 축소의 개념으로 한 축을 나머지 축의 배수 관계로 차원을 축소하여 생각하는 동차 좌표계는 한 축의 배수에 따라 동종의(homogeneous) 좌표를 얻을 수 있다. 이것이 사영 기하학이다.  
: 차원 추가의 개념으로 생성한 동차 좌표는 이동을 행렬곱으로 표현할 수 있게 해준다.

## 4.3. 3차원 변환의 행렬 표현
- 변환행렬을 ```[L|t]``` 이렇게 표현하면 L은 회전성분, t는 이동 성분이다. 결국 회전한 후 이동한 것으로 표현할 수 있다. 즉 자세를 잡고 원하는 위치로 이동..

## 4.4. 월드 변환
- 오브젝트 공간 (object space)  
: 하나의 물체를 모델링하는 데 사용된 좌표계
- 월드 공간 (world space)  
: 오브젝트 공간에서 정의된 물체들을 하나의 좌표계로 통합하는 좌표계  
## 4.5. 회전과 오브젝트 공간 기저

$\begin{pmatrix}
1&2\\  
3&4  
\end{pmatrix}$
